<style>body {margin: 0;} canvas {display: block;}</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/3.0.11/pixi.min.js"></script>

<script>
  const GRID_SIZE = 50;
  const SCROLL_SPEED = 2.5;

  const canvas = document.createElement('canvas');
  const context = canvas.getContext('2d');
  const viewport = { x: 0, y: 0 };
  const mouse = { x: window.innerWidth / 2, y: window.innerWidth / 2 }

  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  function update(time) {
    requestAnimationFrame(update);
    render();

    if(mouse.x < 50) viewport.x -= SCROLL_SPEED;
    if(mouse.x > canvas.width - 50) viewport.x += SCROLL_SPEED;
    if(mouse.y < 50) viewport.y -= SCROLL_SPEED;
    if(mouse.y > canvas.height - 50) viewport.y += SCROLL_SPEED;
  }

  function pxToGrid(pos) {
    return pos / GRID_SIZE;
  }

  function gridToPx(pos) {
    return pos * GRID_SIZE;
  }

  function render() {
    context.clearRect(0, 0, canvas.width, canvas.height);

    const cols = Math.ceil(pxToGrid(canvas.width)) + 1;
    const rows = Math.ceil(pxToGrid(canvas.height)) + 1;
    const offset = { x: viewport.x % GRID_SIZE, y: viewport.y % GRID_SIZE };

    for(var col = 0; col < cols; col++) {
      context.save();
      context.beginPath();
      context.translate(gridToPx(col) - offset.x, 0);
      context.moveTo(0, 0);
      context.lineTo(0, canvas.height);
      context.stroke();
      context.restore();
    }

    for(var row = 0; row < rows; row++) {
      context.save();
      context.beginPath();
      context.translate(0, gridToPx(row) - offset.y);
      context.moveTo(0, 0);
      context.lineTo(canvas.width, 0);
      context.stroke();
      context.restore();
    }

    context.save();
    context.translate(
      gridToPx(Math.floor(pxToGrid(mouse.x + offset.x))) - offset.x,
      gridToPx(Math.floor(pxToGrid(mouse.y + offset.y))) - offset.y
    );
    context.fillRect(0, 0, GRID_SIZE, GRID_SIZE);
    context.restore();
  }

  document.addEventListener('mousemove', e => {
    mouse.x = e.clientX;
    mouse.y = e.clientY;
  });

  window.addEventListener('load', () => {
    document.body.appendChild(canvas);
    requestAnimationFrame(update);
  })
</script>
